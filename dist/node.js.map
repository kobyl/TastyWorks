{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/exports.ts","webpack:///./src/lib/accounts.js","webpack:///./src/lib/authorization.js","webpack:///./src/lib/balances.js","webpack:///./src/lib/cancelOrder.js","webpack:///./src/lib/cometd.js","webpack:///./src/lib/executeOrder.js","webpack:///./src/lib/history.js","webpack:///./src/lib/index.ts","webpack:///./src/lib/liveOrders.js","webpack:///./src/lib/marketMetrics.js","webpack:///./src/lib/optionChain.js","webpack:///./src/lib/positions.js","webpack:///./src/lib/streamer.js","webpack:///./src/util/defaultHeaders.js","webpack:///./src/util/endpoints.js","webpack:///external \"cometd\"","webpack:///external \"cometd-nodejs-client\"","webpack:///external \"superagent\""],"names":["Object","defineProperty","exports","value","lib_1","require","credentials","username","process","env","TASTY_USERNAME","password","TASTY_PASSWORD","console","log","JSON","stringify","TASTY_ACCOUNT_ID","default","setUser","authorization","then","token","setAuthorizationToken","optionChain","chain","table","items","expirations","strikes","streamer","data","cometd","_authorization","_accounts","_balances","_positions","_liveOrders","_executeOrder","_cancelOrder","_marketMetrics","_history","_streamer","_cometd","_optionChain","_headers","_user","authorization_token","accounts","TastyWorks","user","assign","getUser","getHeaders","balances","account_id","positions","marketMetrics","tickers","ticker","liveOrders","executeOrder","symbol","price","quantity","cancelOrder","order_id","history","start_date","end_date"],"mappings":"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","file":"node.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/exports.ts\");\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst lib_1 = require(\"./lib\");\r\n// Test code. remove\r\nconst credentials = {\r\n    username: process.env.TASTY_USERNAME,\r\n    password: process.env.TASTY_PASSWORD\r\n};\r\nconsole.log(JSON.stringify(credentials));\r\nlet TASTY_ACCOUNT_ID;\r\n// Set the username and password\r\nlib_1.default.setUser(credentials);\r\n// Before making any calls, get the session-token via the authorization endpoint\r\nlib_1.default.authorization()\r\n    .then(token => {\r\n    // Set the authorization in the headers\r\n    lib_1.default.setAuthorizationToken(token);\r\n    console.log('Session is active, continue with other calls.');\r\n    return true;\r\n})\r\n    .then(() => lib_1.default.optionChain('TSLA'))\r\n    .then((chain) => {\r\n    console.log('======= Option chain =======');\r\n    console.log(chain);\r\n    console.table(chain.items[0].expirations[0].strikes);\r\n})\r\n    .then(() => lib_1.default.streamer())\r\n    .then((data) => lib_1.default.cometd(data));\r\n","'use strict';\r\n\r\n/**\r\n * Get Accounts\r\n * @param {object} headers\r\n * @return {object} array of accounts\r\n */\r\n\r\nconst request = require('superagent');\r\nconst endpoints = require('../util/endpoints');\r\n\r\nmodule.exports = (headers) => {\r\n    const endpoint = endpoints['accounts']();\r\n    return request\r\n        .get(`${endpoint}`)\r\n        .set(headers)\r\n        .then(res => {\r\n            const {\r\n                body: {\r\n                    data: {\r\n                        items\r\n                    }\r\n                }\r\n            } = res;\r\n\r\n            const accounts = items.map(data => {\r\n                const {\r\n                    account\r\n                } = data;\r\n\r\n                return account;\r\n            });\r\n\r\n            return accounts;\r\n        });\r\n}\r\n","'use strict';\r\n\r\n/**\r\n * Get Authorization Token\r\n * @param {string} username\r\n * @param {string} passworde\r\n * @return {string} session token\r\n */\r\n\r\nconst request = require('superagent');\r\nconst endpoints = require('../util/endpoints');\r\n\r\nmodule.exports = (username, password, headers) => {\r\n    const endpoint = endpoints['login']();\r\n    return request\r\n        .post(`${endpoint}`)\r\n        .set(headers)\r\n        .send({\r\n            login: username,\r\n            password: password\r\n        })\r\n        .then(res => {\r\n            const {\r\n                body: {\r\n                    data\r\n                }\r\n            } = res;\r\n            return data['session-token'];\r\n        });\r\n}\r\n","'use strict';\r\n\r\n/**\r\n * Get Account Balances\r\n * @param {object} headers\r\n * @param {string} accountId\r\n * @return {object} account balances\r\n */\r\n\r\nconst request = require('superagent');\r\nconst endpoints = require('../util/endpoints');\r\n\r\nmodule.exports = (headers, account_id) => {\r\n    const endpoint = endpoints['balances'](account_id);\r\n    return request\r\n        .get(`${endpoint}`)\r\n        .set(headers)\r\n        .send()\r\n        .then(res => {\r\n            const {\r\n                body: {\r\n                    data\r\n                }\r\n            } = res;\r\n\r\n            return data;\r\n        });\r\n}\r\n","'use strict';\r\n\r\n/**\r\n * Execute Order\r\n * @param {object} headers\r\n * @param {string} accountId\r\n * @param {string} orderId\r\n * @return {object} data\r\n */\r\n\r\nconst request = require('superagent');\r\nconst endpoints = require('../util/endpoints');\r\n\r\nmodule.exports = (headers, account_id, order_id) => {\r\n    const endpoint = endpoints['cancelOrder'](account_id,order_id);\r\n    return request\r\n        .delete(`${endpoint}`)\r\n        .set(headers)\r\n        .send()\r\n        .then(res => {\r\n            const {\r\n                body: {\r\n                    data\r\n                }\r\n            } = res;\r\n\r\n            return data;\r\n        });\r\n}\r\n","'use strict';\r\n\r\nrequire('cometd-nodejs-client').adapt();\r\nconst lib = require(\"cometd\");\r\n\r\n// Function that manages the connection status with the Bayeux server\r\nfunction onMetaHandshake(message) {\r\n    // if (cometd === null || cometd.isDisconnected()) {\r\n    //     updateConnectedState(false);\r\n    //     return;\r\n    // }\r\n    // if (!message.successful) {\r\n    //     info(\"Authentication failed or no token provided\");\r\n    // }\r\n    // updateConnectedState(message.successful === true);\r\n}\r\n\r\n// Function that manages the connection status with the Bayeux server\r\nfunction onMetaConnect(message) {\r\n    // if (cometd === null || cometd.isDisconnected()) {\r\n    //     updateConnectedState(false);\r\n    //     return;\r\n    // }\r\n    // updateConnectedState(message.successful === true);\r\n}\r\n\r\nfunction onMetaUnsuccessful() {\r\n    // updateConnectedState(false)\r\n}\r\n\r\nfunction onServiceState(message) {\r\n    // debug(\"Received state \" + JSON.stringify(message));\r\n    // endpointImpl.onStateChange(message.data);\r\n}\r\n\r\nfunction onServiceData(message) {\r\n    // debug(\"Received data \" + JSON.stringify(message));\r\n    // endpointImpl.onData(message.data, false);\r\n}\r\n\r\nfunction onServiceTimeSeriesData(message) {\r\n    // debug(\"Received time series data \" + JSON.stringify(message));\r\n    // endpointImpl.onData(message.data, true);\r\n}\r\n\r\nconst subscribe = function(message) {\r\n\r\n}\r\n\r\nconst publish = function (service, message) {\r\n    debug(\"Publishing to \" + service + \": \" + JSON.stringify(message));\r\n    cometd.publish(\"/service/\" + service, message);\r\n};\r\n\r\n// https://api.tastyworks.com/quote-streamer-tokens\r\n\r\n/**\r\n * Connect to cometd\r\n * @param {object} headers\r\n * @param {string} accountId\r\n * @return {object} orders\r\n */\r\n\r\nmodule.exports = (headers, data) => {\r\n    console.log(data);\r\n    console.log(\"Starting cometd\");\r\n    let config = {};\r\n    const cometd = new lib.CometD();\r\n    // cometd.unregisterTransports();\r\n\r\n    // Registration order is important.\r\n    // cometd.registerTransport('websocket', new cometd.WebSocketTransport());\r\n    // cometd.registerTransport('long-polling', new LongPollingTransport(cometd));\r\n    // cometd.registerTransport('callback-polling', new CallbackPollingTransport(cometd));\r\n\r\n    console.table(headers['Authorization']);\r\n\r\n    const printData = pkg => {\r\n        \r\n        \r\n    };\r\n\r\n    cometd.addListener(\"/meta/handshake\", console.table);\r\n    cometd.addListener(\"/meta/connect\", console.table);\r\n    cometd.addListener(\"/meta/unsuccessful\", console.table);\r\n    cometd.addListener(\"/service/state\", console.table);\r\n    cometd.addListener(\"/service/data\", console.table);\r\n    cometd.addListener(\"/service/timeSeriesData\", console.table);\r\n\r\n    config.url = 'wss://tasty.dxfeed.com/live/cometd';\r\n    cometd.configure(config);\r\n    cometd.handshake({ ext: { \"com.devexperts.auth.AuthToken\": data.token } });\r\n\r\n    cometd.publish(\"/service/sub\", {\"reset\":true,\"add\":{\"Trade\":[\"SPY\"],\"Quote\":[\"SPY\"],\"Summary\":[\"SPY\"],\"Profile\":[\"SPY\"]}});\r\n\r\n    console.log(\"Call complete\");\r\n}\r\n","'use strict';\r\n\r\n/**\r\n * Execute Order\r\n * @param {object} headers\r\n * @param {string} accountId\r\n * @return {object} orders\r\n */\r\n\r\nconst request = require('superagent');\r\nconst endpoints = require('../util/endpoints');\r\n\r\nmodule.exports = (headers, account_id, symbol, price, quantity) => {\r\n    const endpoint = endpoints['executeOrder'](account_id);\r\n    return request\r\n        .post(`${endpoint}`)\r\n        .set(headers)\r\n        .send({\r\n            \"source\": \"WBT\",\r\n            \"order-type\": \"Limit\",\r\n            \"price\": price,\r\n            \"price-effect\": \"Debit\",\r\n            \"time-in-force\": \"Day\",\r\n            \"legs\": [{\"instrument-type\": \"Equity Option\",\r\n                     \"symbol\": symbol,\r\n                     \"quantity\": quantity,\r\n                     \"action\": \"Buy to Open\"}]\r\n        })\r\n        .then(res => {\r\n            const {\r\n                body: {\r\n                    data: {\r\n                        order\r\n                    }\r\n                }\r\n            } = res;\r\n\r\n            return order;\r\n        });\r\n}\r\n","'use strict';\r\n\r\n/**\r\n * Get Account History\r\n * @param {object} headers\r\n * @param {string} account_id\r\n * @param {date} start_date (yyyy-mm-dd)\r\n * @param {date} end_date (yyyy-mm-dd)\r\n * @return {object} account history\r\n */\r\n\r\nconst request = require('superagent');\r\nconst endpoints = require('../util/endpoints');\r\n\r\nconst doRequest = (headers, endpoint, start_date, end_date, pageOffset) => {\r\n  return request\r\n    .get(`${endpoint}`)\r\n    .query({\r\n      'start-date': `${start_date}T07:00:00.000Z`\r\n    })\r\n    .query({\r\n      'end-date': `${end_date}T07:00:00.000Z`\r\n    })\r\n    .query({\r\n      'page-offset': pageOffset\r\n    })\r\n    .set(headers)\r\n    .send()\r\n    .then(res => {\r\n      const {\r\n        body: {\r\n          pagination,\r\n          data: {\r\n            items\r\n          }\r\n        }\r\n      } = res;\r\n      return { items, pagination };\r\n    });\r\n}\r\n\r\nmodule.exports = async (headers, account_id, start_date, end_date) => {\r\n  const endpoint = endpoints['history'](account_id);\r\n  const items = [];\r\n  let currentPage = -1;\r\n  let keepGoing = true;\r\n  while (keepGoing) { \r\n    const r = await doRequest(headers, endpoint, start_date, end_date, ++currentPage);\r\n\r\n    if(r && !!r.message && r.status !=200){\r\n      keepGoing = false;\r\n    } else {\r\n      items.push.apply(items, r.items);\r\n      keepGoing = currentPage < r.pagination['total-pages'] - 1;\r\n    }\r\n  }\r\n  return items;\r\n}\r\n","'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _authorization = require('./authorization');\r\nconst _accounts = require('./accounts');\r\nconst _balances = require('./balances');\r\nconst _positions = require('./positions');\r\nconst _liveOrders = require('./liveOrders');\r\nconst _executeOrder = require('./executeOrder');\r\nconst _cancelOrder = require('./cancelOrder');\r\nconst _marketMetrics = require('./marketMetrics');\r\nconst _history = require('./history');\r\nconst _streamer = require('./streamer');\r\nconst _cometd = require('./cometd');\r\nconst _optionChain = require('./optionChain');\r\nlet _headers = require('../util/defaultHeaders');\r\nlet _user = {\r\n    username: null,\r\n    password: null,\r\n    authorization_token: null,\r\n    accounts: []\r\n};\r\nconst TastyWorks = {\r\n    setUser: (user) => {\r\n        _user = Object.assign(Object.assign({}, _user), user);\r\n    },\r\n    getUser: () => _user,\r\n    setAuthorizationToken: (authorization_token) => _headers['Authorization'] = authorization_token,\r\n    getHeaders: () => _headers,\r\n    authorization: () => _authorization(_user.username, _user.password, _headers),\r\n    accounts: () => _accounts(_headers),\r\n    balances: (account_id) => _balances(_headers, account_id),\r\n    positions: (account_id) => _positions(_headers, account_id),\r\n    marketMetrics: (account_id, tickers) => _marketMetrics(_headers, account_id, tickers),\r\n    optionChain: (account_id, ticker) => _optionChain(_headers, account_id, ticker),\r\n    liveOrders: (account_id) => _liveOrders(_headers, account_id),\r\n    executeOrder: (account_id, symbol, price, quantity) => _executeOrder(_headers, account_id, symbol, price, quantity),\r\n    cancelOrder: (account_id, order_id) => _cancelOrder(_headers, account_id, order_id),\r\n    streamer: () => _streamer(_headers),\r\n    cometd: (data) => _cometd(_headers, data),\r\n    history: (account_id, start_date, end_date) => _history(_headers, account_id, start_date, end_date)\r\n};\r\nexports.default = TastyWorks;\r\n","'use strict';\r\n\r\n/**\r\n * Get Account Orders\r\n * @param {object} headers\r\n * @param {string} accountId\r\n * @return {object} orders\r\n */\r\n\r\nconst request = require('superagent');\r\nconst endpoints = require('../util/endpoints');\r\n\r\nmodule.exports = (headers, account_id) => {\r\n    const endpoint = endpoints['liveOrders'](account_id);\r\n    return request\r\n        .get(`${endpoint}`)\r\n        .set(headers)\r\n        .send()\r\n        .then(res => {\r\n            const {\r\n                body: {\r\n                    data: {\r\n                        items\r\n                    }\r\n                }\r\n            } = res;\r\n\r\n            return items;\r\n        });\r\n}\r\n","'use strict';\r\n\r\n/**\r\n * Get market metrics\r\n * @param {object} headers\r\n * @param {object} array of tickers\r\n * @return {object} array of metrics\r\n */\r\n\r\nconst request = require('superagent');\r\nconst endpoints = require('../util/endpoints');\r\n\r\nmodule.exports = (headers, tickers) => {\r\n    const endpoint = endpoints['marketMetrics'](tickers);\r\n    return request\r\n        .get(`${endpoint}`)\r\n        .set(headers)\r\n        .send()\r\n        .then(res => {\r\n            const {\r\n                body: {\r\n                    data\r\n                }\r\n            } = res;\r\n\r\n            return data;\r\n        });\r\n}\r\n","'use strict';\r\n\r\n/**\r\n * Get market metrics\r\n * @param {object} headers\r\n * @param {string} ticker\r\n */\r\n\r\nconst request = require('superagent');\r\nconst endpoints = require('../util/endpoints');\r\n\r\nmodule.exports = (headers, ticker) => {\r\n    const endpoint = endpoints['optionChain'](ticker);\r\n    return request\r\n        .get(`${endpoint}`)\r\n        .set(headers)\r\n        .send()\r\n        .then(res => {\r\n            const {\r\n                body: {\r\n                    data\r\n                }\r\n            } = res;\r\n\r\n            return data;\r\n        });\r\n}\r\n","'use strict';\r\n\r\n/**\r\n * Get Account Positions\r\n * @param {object} headers\r\n * @param {string} accountId\r\n * @return {object} account positions\r\n */\r\n\r\nconst request = require('superagent');\r\nconst endpoints = require('../util/endpoints');\r\n\r\nmodule.exports = (headers, account_id) => {\r\n    const endpoint = endpoints['positions'](account_id);\r\n    return request\r\n        .get(`${endpoint}`)\r\n        .set(headers)\r\n        .send()\r\n        .then(res => {\r\n            const {\r\n                body: {\r\n                    data\r\n                }\r\n            } = res;\r\n\r\n            return data;\r\n        });\r\n}\r\n","'use strict';\r\n\r\n/**\r\n * Get Account Orders\r\n * @param {object} headers\r\n * @param {string} accountId\r\n * @return {object} orders\r\n */\r\n\r\nconst request = require('superagent');\r\nconst endpoints = require('../util/endpoints');\r\n\r\nmodule.exports = (headers) => {\r\n    const endpoint = endpoints['streamer']();\r\n    return request\r\n        .get(`${endpoint}`)\r\n        .set(headers)\r\n        .send()\r\n        .then(res => {\r\n            const {\r\n                body: {\r\n                    data\r\n                }\r\n            } = res;\r\n\r\n            return data;\r\n        });\r\n}\r\n","module.exports = {\r\n    'Accept': 'application/json, text/javascript, */*; q=0.01',\r\n    'Accept-Encoding': 'gzip, deflate, br',\r\n    'Accept-Language': 'en-US,en;q=0.9,tr;q=0.8',\r\n    'Accept-Version': 'v1',\r\n    'Authorization': null,\r\n    'Connection': 'keep-alive',\r\n    'Host': 'api.tastyworks.com',\r\n    'Origin': 'https://trade.tastyworks.com',\r\n    'Referer': 'https://trade.tastyworks.com/tw'\r\n}\r\n","const baseURL = 'https://api.tastyworks.com';\r\n//trade.dough.com\r\n\r\nmodule.exports = {\r\n    login: () => `${baseURL}/sessions`,\r\n    validateLogin: () => `${baseURL}/sessions/validate`,\r\n    accounts: () => `${baseURL}/customers/me/accounts`,\r\n    balances: (account_id) => `${baseURL}/accounts/${account_id}/balances`,\r\n    positions: (account_id) => `${baseURL}/accounts/${account_id}/positions`,\r\n    liveOrders: (account_id) => `${baseURL}/accounts/${account_id}/orders/live`,\r\n    executeOrder: (account_id) => `${baseURL}/accounts/${account_id}/orders`,\r\n    cancelOrder: (account_id, order_id) => `${baseURL}/accounts/${account_id}/orders/${order_id}`,\r\n    streamer: () => `${baseURL}/quote-streamer-tokens`,\r\n  \toptionChain: (ticker) => `${baseURL}/option-chains/${ticker}/nested`,\r\n    history: (account_id) => `${baseURL}/accounts/${account_id}/transactions`,\r\n    marketMetrics: (tickers) => `${baseURL}/market-metrics?symbols=${tickers}`\r\n    // TODO: '{url}/dry-run'\r\n}\r\n","module.exports = require(\"cometd\");","module.exports = require(\"cometd-nodejs-client\");","module.exports = require(\"superagent\");"],"sourceRoot":""}